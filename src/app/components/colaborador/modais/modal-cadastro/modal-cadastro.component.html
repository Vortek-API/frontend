<div class="container-modal-cadastro">
  <div class="cadastro-content">
    <h3>Adicionar Colaborador</h3> 
    <div class="form-group avatar-group">
      <div class="avatar" *ngIf="imagemPreview; else noImage">
        <img 
          [src]="imagemPreview" 
          class="avatar-img" 
          (click)="fileInput.click()" 
        />
      </div>
    
      <ng-template #noImage>
        <div 
          class="avatar"
          (click)="fileInput.click()">
          <span class="avatar-text">Adicionar Foto</span>
        </div>
      </ng-template>
    
      <input 
        type="file" 
        #fileInput 
        style="display: none"
        accept="image/*" 
        (change)="onFileSelected($event)"
      />
    </div>
    
    <form #form="ngForm" novalidate>
      <div class="form-group">
        <label for="cpf">CPF</label>
        <input 
          type="text" 
          id="cpf" 
          name="cpf"
          [(ngModel)]="colaborador.cpf" 
          required 
          mask="000.000.000-00"
          class="form-control"
          #cpf="ngModel"
        />
          <div *ngIf="cpf.invalid && (cpf.dirty || cpf.touched)" class="error-message">
            <div *ngIf="cpf.errors?.['required']">
              CPF é obrigatório.
            </div>
          </div>
      </div>
    
      <div class="form-group">
        <label for="nome">Nome</label>
        <input 
          type="text" 
          id="nome" 
          name="nome" 
          [(ngModel)]="colaborador.nome" 
          required
          class="form-control"
          #nome="ngModel"
        />
        <div *ngIf="nome.invalid && (nome.dirty || nome.touched)" class="error-message">
          <div *ngIf="nome.errors?.['required']">
            Nome é obrigatório.
          </div>
        </div>
      </div>
    
      <div class="form-group">
        <label for="cargo">Cargo</label>
        <input 
          type="text" 
          id="cargo" 
          name="cargo" 
          [(ngModel)]="colaborador.cargo" 
          required
          class="form-control"
          #cargo="ngModel"
        />
        <div *ngIf="cargo.invalid && (cargo.dirty || cargo.touched)" class="error-message">
          <div *ngIf="cargo.errors?.['required']">
            Cargo é obrigatório.
          </div>
        </div>
      </div>
    
      <div class="form-group">
        <label for="horarioEntrada">Hora de entrada</label>
        <input 
          type="time" step="1" 
          id="horarioEntrada" 
          name="horarioEntrada" 
          [(ngModel)]="colaborador.horarioEntrada" 
          required
          class="form-control"
          #hora_ent="ngModel"
        />
        <div *ngIf="hora_ent.invalid && (hora_ent.dirty || hora_ent.touched)" class="error-message">
          <div *ngIf="hora_ent.errors?.['required']">
            Hora de Entrada é obrigatória.
          </div>
        </div>
      </div>
    
      <div class="form-group">
        <label for="horarioSaida">Hora de saída</label>
        <input 
          type="time" step="1" 
          id="horarioSaida" 
          name="horarioSaida" 
          [(ngModel)]="colaborador.horarioSaida" 
          required
          class="form-control"
          #hora_sai="ngModel"
        />
        <div *ngIf="hora_sai.invalid && (hora_sai.dirty || hora_sai.touched)" class="error-message">
          <div *ngIf="hora_sai.errors?.['required']">
            Hora de Saída é obrigatória.
          </div>
        </div>
      </div>
    
      <div class="form-group">
        <label for="empresas">Empresas</label>
        <mat-form-field appearance="outline" class="full-width">
          <mat-select
            id="empresas"
            name="empresas"
            [(ngModel)]="colaborador.empresas"
            multiple
            required
            placeholder="Selecione"
            panelClass="empresas-select-panel"
            #empresa="ngModel">
            <mat-option *ngFor="let empresa of empresas" [value]="empresa">
              {{ empresa.nome }}
            </mat-option>
          </mat-select>
        </mat-form-field>
          <div *ngIf="empresa.invalid && (empresa.dirty || empresa.touched)" class="error-message">
            <div *ngIf="empresa.errors?.['required']">
              Empresa é obrigatória.
            </div>
          </div>
      </div>
    
      <div class="form-group">
        <label for="status">Status</label>
        <select 
          id="status" 
          name="status" 
          [(ngModel)]="colaborador.statusAtivo" 
          required
          class="form-control"
          #status="ngModel"
        >
          <option value="true">Ativo</option>
          <option value="false">Inativo</option>
        </select>
      </div>
    </form>
    
    <div class="actions">
      <button class="btn-primary" (click)="save(form)">Confirmar</button>
      <button class="btn-secondary" (click)="close()">Cancelar</button>
    </div>
  </div>
</div>
